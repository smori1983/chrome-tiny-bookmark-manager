/*!
 * prototype-extensions.js v0.1
 *
 * Copyright (c) 2012 smori <smori1983@gmail.com>
 * Dual licensed under the MIT or GPL-2.0 licenses.
 *
 * Includes php.js
 * http://phpjs.org/
 * Copyright (c) 2011 Kevin van Zonneveld
 * Dual licensed under the MIT or GPL-2.0 licenses.
 */
Function.prototype.method=function(a,b){if(!this.prototype[a])return this.prototype[a]=b,this},String.method("compare",function(a){var b=this.toString();return typeof a=="number"&&(a=a.toString()),typeof a=="string"?b===a?0:b<a?-1:1:0}),String.method("escapeBase64",function(){var a={"+":"%28","/":"%2F","=":"%3D"};return function(){return this.replace(/[\+\/=]/g,function(b){return a[b]})}}()),String.method("escapeHTML",function(){var a={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#039;"};return function(){return this.replace(/[<>&"']/g,function(b){return a[b]})}}()),String.method("format",function(){var a=function(a,b){var c,d;return typeof a=="string"||typeof a=="number"||typeof a=="boolean"?(b.length>2&&(d=parseInt(b.slice(1,-1),10),a.length<d&&(a=" ".repeat(d-a.length)+a)),c=a):c="",c},b=function(a,b){var c,d,e;return typeof a=="number"||typeof a=="string"&&a.match(/^\d/)?(c=parseInt(a,10).toString(),b.length>2&&(d=b.slice(1,2)==="0"?"0":" ",e=parseInt(b.slice(1,-1),10),c.length<e&&(c=d.repeat(e-c.length)+c))):c="",c};return function(){var c,e,f="",g=Array.prototype.slice.apply(arguments),h=/%%|%\d*s|%\d*d/g,i=this.split(h),j=this.match(h);for(c=0;c<i.length;c++)f+=i[c],c<i.length-1&&(j[c]==="%%"?f+="%":j[c].slice(-1)==="s"?f+=a(g.shift(),j[c]):j[c].slice(-1)==="d"&&(f+=b(g.shift(),j[c])));return f}}()),String.method("isNumeric",function(){return this.match(/^[\+\-]?\d+(?:\.\d+)?/)!==null}),String.method("lowerFirst",function(){return this.slice(0,1).toLocaleLowerCase()+this.slice(1)}),String.method("pad",function(a,b){var c=this;return typeof a=="number"&&a>0&&typeof b=="string"&&b.length>0&&(c=c.padLeft(c.length+Math.floor((a-c.length)/2),b),c=c.padRight(a,b)),c}),String.method("padLeft",function(a,b){var c,d=this;return typeof a=="number"&&a>0&&typeof b=="string"&&b.length>0&&(c=b.repeat(Math.ceil(a-this.length)/b.length).slice(0,a-this.length),d=c+this),d}),String.method("padRight",function(a,b){var c,d=this;return typeof a=="number"&&a>0&&typeof b=="string"&&b.length>0&&(c=b.repeat(Math.ceil(a-this.length)/b.length).slice(0,a-this.length),d=this+c),d}),String.method("regexQuote",function(){return this.replace(/[\^\$\.\?\*\+\-\\\/\:\=\!\,\(\)\[\]\{\}]/g,function(a){return"\\"+a})}),String.method("repeat",function(a){var b,c="";if(typeof a=="number")for(b=0;b<a;b++)c+=this;return c}),String.method("reverse",function(){return this.split("").reverse().join("")}),String.method("trim",function(){return this.replace(/^\s+|\s+$/g,"")}),String.method("trimLeft",function(){return this.replace(/^\s+/,"")}),String.method("trimRight",function(){return this.replace(/\s+$/,"")}),String.method("unescapeHTML",function(){var a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&#039;":"'"};return function(){return this.replace(/&lt;|&gt;|&amp;|&quot;|&#039;/g,function(b){return a[b]})}}()),String.method("upperFirst",function(){return this.slice(0,1).toLocaleUpperCase()+this.slice(1)}),String.method("upperWords",function(){return this.replace(/\S+/g,function(a){return a.upperFirst()})}),Date.method("add",function(a){var b=Date.parse(this.toUTCString());return a.hasOwnProperty("day")&&(b+=a.day*864e5),a.hasOwnProperty("hour")&&(b+=a.hour*36e5),a.hasOwnProperty("minute")&&(b+=a.minute*6e4),a.hasOwnProperty("second")&&(b+=a.second*1e3),new Date(b)}),Date.method("format",function(a){var b=a;return b=b.replace(/([^%]?)%Y/g,"$1"+this.getFullYear().toString()),b=b.replace(/([^%]?)%y/g,"$1"+this.getFullYear().toString().slice(-2)),b=b.replace(/([^%]?)%m/g,"$1"+("0"+(this.getMonth()+1)).slice(-2)),b=b.replace(/([^%]?)%d/g,"$1"+("0"+this.getDate()).slice(-2)),b=b.replace(/([^%]?)%H/g,"$1"+("0"+this.getHours()).slice(-2)),b=b.replace(/([^%]?)%i/g,"$1"+("0"+this.getMinutes()).slice(-2)),b=b.replace(/([^%]?)%s/g,"$1"+("0"+this.getSeconds()).slice(-2)),b}),String.method("base64Decode",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(){var b,c,d,e,f,g,h,i,j=0,k=[];do e=a.indexOf(this.charAt(j++)),f=a.indexOf(this.charAt(j++)),g=a.indexOf(this.charAt(j++)),h=a.indexOf(this.charAt(j++)),i=e<<18|f<<12|g<<6|h,b=i>>16&255,c=i>>8&255,d=i&255,g===64?k.push(String.fromCharCode(b)):h===64?k.push(String.fromCharCode(b,c)):k.push(String.fromCharCode(b,c,d));while(j<this.length);return k.join("").utf8Decode()}}()),String.method("base64Encode",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(){var b,c,d,e,f,g,h,i,j="",k=[],l=0,m=this.utf8Encode();do b=m.charCodeAt(l++),c=m.charCodeAt(l++),d=m.charCodeAt(l++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=i&63,k.push(a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(h));while(l<m.length);j=k.join("");var n=m.length%3;return(n?j.slice(0,n-3):j)+"===".slice(n||3)}}()),String.method("utf8Decode",function(){var a=[],b=0,c,d,e;while(b<this.length)c=this.charCodeAt(b),c<128?(a.push(String.fromCharCode(c)),b+=1):c>191&&c<224?(d=this.charCodeAt(b+1),a.push(String.fromCharCode((c&31)<<6|d&63)),b+=2):(d=this.charCodeAt(b+1),e=this.charCodeAt(b+2),a.push(String.fromCharCode((c&15)<<12|(d&63)<<6|e&63)),b+=3);return a.join("")}),String.method("utf8Encode",function(){var a="",b=0,c=0,d=this.length,e,f,g;for(e=0;e<d;e++)f=this.charCodeAt(e),g=null,f<128?c++:f>=128&&f<2048?g=String.fromCharCode(f>>6|192)+String.fromCharCode(f&63|128):g=String.fromCharCode(f>>12|224)+String.fromCharCode(f>>6&63|128)+String.fromCharCode(f&63|128),g!==null&&(c>b&&(a+=this.slice(b,c)),a+=g,b=c=e+1);return c>b&&(a+=this.slice(b,d)),a});